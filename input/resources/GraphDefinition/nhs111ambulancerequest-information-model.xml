<GraphDefinition xmlns="http://hl7.org/fhir">
    <id value="nhs111ambulancerequest-information-model"/>
    <url value="https://project-wildfyre.github.io/careconnect-messaging-r4/GraphDefinition/nhs111ambulancerequest-information-model"/>
    <name value="Information Model - NHS 111 Report"/>
    <status value="draft"/>
    <date value="2019-03-03T00:00:00+00:00"/>
    <publisher value="NHS Digital"/>
    <contact>
        <telecom>
            <system value="url"/>
            <value value="http://fhir.nhs.uk"/>
        </telecom>
    </contact>
    <description value="This message is a request for an ambulance to be dispatched. It contains the information from a NHS 111 encounter required for an ambulance service to be able to dispatch an ambulance."/>
    <start value="ServiceRequest"/>
    <profile value="http://hl7.org/fhir/R4/StructureDefinition/ServiceRequest"/>
    <link id="#serviceRequest">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="*"/>
        <description value="A ServiceEvent can further specialize the act inherent in the ClinicalDocument.code, such as where the Composition.code is simply &#39;Procedure Report&#39; and the procedure was a &#39;colonoscopy&#39;."/>
        <target>
            <type value="ServiceRequest"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/ServiceRequest"/>
            <link>
                <path value="ServiceRequest.subject"/>
                <min value="1"/>
                <max value="1"/>
                <description value="The patient. This comes from Encounter in ITK but would also be from ServiceRequest in FHIR"/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#patient"/>
                    </extension>
                    <type value="Patient"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Patient"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.requestor"/>
                <min value="1"/>
                <max value="1"/>
                <description value="This links the ambulance request to author of the request."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#custodian"/>
                    </extension>
                    <type value="Organization"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Organization"/>
                </target>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#author"/>
                    </extension>
                    <type value="Practitioner"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Practitioner"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.performer"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used for the list of recipients of the ambulance request message."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#recipientOrganisation"/>
                    </extension>
                    <type value="Organization"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Organization"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.replaces"/>
                <min value="0"/>
                <max value="1"/>
                <description value="It is used when the ambulance request message is being replaced by an updated version. The new and previous ambulance request must be for the same NHS 111 case.(i.e. have the same case id). The ambulance request being sent replaces the one referenced in previous ambulance request class."/>
                <target>
                    <type value="ServiceRequest"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/ServiceRequest"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="TriageOutcome"/>
                <min value="1"/>
                <max value="1"/>
                <description value="Justifying Triage Outcome "/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#triageOutcome"/>
                    </extension>
                    <type value="Observation"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <min value="0"/>
                <max value="1"/>
                <description value="Triage Disposition"/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#triageDisposition"/>
                    </extension>
                    <type value="Observation"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <min value="0"/>
                <max value="1"/>
                <description value="CLinical Discriminator"/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#clinicalDiscriminator"/>
                    </extension>
                    <type value="Observation"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.notes"/>
                <min value="0"/>
                <max value="1"/>
                <description value="Used to carry additional notes pertinent to the ambulance request."/>
                <target>
                    <type value="Composition"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Composition"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="PermissionToView"/>
                <min value="0"/>
                <max value="1"/>
                <description value="It is used to carry the Permission To View outcome."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#permissionToView"/>
                    </extension>
                    <type value="Consent"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Consent"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.encounter"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used when the ambulance request message is being replaced by an updated version. The new and previous ambulance request must be for the same NHS 111 case.(i.e. have the same case id). The ambulance request being sent replaces the one referenced in previous ambulance request class."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#encompassingEncounter"/>
                    </extension>
                    <type value="Encounter"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Encounter"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="TraumaFlag"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used to indicate information about whether the patient has suffered trauma pertinent to the ambulance request."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#traumaFlag"/>
                    </extension>
                    <type value="Flag"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="FireFlag"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used to indicate information about whether there is a risk of fire at the incident scene pertinent to the ambulance request."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#fireFlag"/>
                    </extension>
                    <type value="Flag"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="SceneSafeFlag"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used to indicate information about whether the scene is safe pertinent to the ambulance request."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#safeFlag"/>
                    </extension>
                    <type value="Flag"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="PoliceFlag"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used to indicate information about whether police are in attendance at the incident scence pertinent to the ambulance request"/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#policeFlag"/>
                    </extension>
                    <type value="Flag"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
                </target>
            </link>
            <link>
                <path value="ServiceRequest.supportingInformation[x]"/>
                <sliceName value="TrappedFlag"/>
                <min value="1"/>
                <max value="1"/>
                <description value="It is used to indicate information about whether the patient is trapped pertinent to the ambulance request."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#trappedFlag"/>
                    </extension>
                    <type value="Flag"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
                </target>
            </link>
        </target>
    </link>
    <link id="#patient">
        <path value="Bundle.entry.resource[0]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="Patient"/>
        <target>
            <type value="Patient"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Patient"/>
        </target>
    </link>
    <link id="#author">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="It holds details of how and when the author authored the document."/>
        <target>
            <type value="Practitioner"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Practitioner"/>
        </target>
    </link>
    <link id="#custodian">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="It holds details of how and when the author authored the document."/>
        <target>
            <type value="Organization"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Organization"/>
        </target>
    </link>
    <link id="#recipientOrganisation">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="Recieving Ambulance Service."/>
        <target>
            <type value="Organization"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Organization"/>
        </target>
    </link>
    <link id="#triageOutcome">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="Triage Outcome (coded)"/>
        <target>
            <type value="Observation"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
        </target>
    </link>
    <link id="#triageDisposition">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="Triage Disposition (coded)"/>
        <target>
            <type value="Observation"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
        </target>
    </link>
    <link id="#clinicalDiscriminator">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="a concept from the NHS Pathways codes, or a text representation, to describe the clinical discriminator."/>
        <target>
            <type value="Observation"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Observation"/>
        </target>
    </link>
    <link id="#permissionToView">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="*"/>
        <description value="ITK Consent / ITK Permission to View Section"/>
        <target>
            <type value="Consent"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Consent"/>
        </target>
    </link>
    <link id="#encompassingEncounter">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="This is a component of relationship it is used to link the document header to the EncompassingEncounter that the document is documenting."/>
        <target>
            <type value="Encounter"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Encounter"/>
            <link>
                <path value="Encounter.location"/>
                <min value="1"/>
                <max value="1"/>
                <description value="This is the location where the NHS 111 encounter call was made from by the patient or third party on behalf of the patient."/>
                <target>
                    <extension url="https://fhir.mayfield-is.co.uk/extension-GraphDefinition.targetLinkId">
                        <valueString value="#serviceLocation"/>
                    </extension>
                    <type value="Location"/>
                    <profile value="http://hl7.org/fhir/R4/StructureDefinition/Location"/>
                </target>
            </link>
        </target>
    </link>
    <link id="#serviceLocation">
        <path value="Bundle.entry.resource[x]"/>
        <min value="1"/>
        <max value="1"/>
        <description value="This is the location where the NHS 111 encounter call was made from by the patient or third party on behalf of the patient."/>
        <target>
            <type value="Location"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Location"/>
        </target>
    </link>
    <link id="#traumaFlag">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="1"/>
        <description value="(Observation?) It is used to indicate information about whether the patient has suffered trauma pertinent to the ambulance request."/>
        <target>
            <type value="Flag"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
        </target>
    </link>
    <link id="#fireFlag">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="1"/>
        <description value="(Observation?) It is used to indicate information about whether there is a risk of fire at the incident scene pertinent to the ambulance request."/>
        <target>
            <type value="Flag"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
        </target>
    </link>
    <link id="#safeFlag">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="1"/>
        <description value="(Observation?) It is used to indicate information about whether the scene is safe pertinent to the ambulance request."/>
        <target>
            <type value="Flag"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
        </target>
    </link>
    <link id="#policeFlag">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="1"/>
        <description value="(Observation?) It is used to indicate information about whether police are in attendance at the incident scence pertinent to the ambulance request"/>
        <target>
            <type value="Flag"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
        </target>
    </link>
    <link id="#trappedFlag">
        <path value="Bundle.entry.resource[x]"/>
        <min value="0"/>
        <max value="1"/>
        <description value="(Observation?) It is used to indicate information about whether the patient is trapped pertinent to the ambulance request."/>
        <target>
            <type value="Flag"/>
            <profile value="http://hl7.org/fhir/R4/StructureDefinition/Flag"/>
        </target>
    </link>
</GraphDefinition>